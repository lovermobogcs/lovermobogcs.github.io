<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Weather Widget</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 10px;
    }
    .weather {
      border: 1px solid #ccc;
      padding: 10px;
      display: inline-block;
      background: #f0f8ff;
      border-radius: 10px;
      max-width: 300px;
    }
    .icon {
      width: 64px;
      height: 64px;
    }
  </style>
</head>
<body>
  <div class="weather" id="weather">
    Loading weather...
  </div>

  <script>
    async function getWeather() {
      const url = "https://api.open-meteo.com/v1/forecast?latitude=52.4814&longitude=-1.8998&daily=sunrise,sunset&hourly=temperature_2m,precipitation,wind_speed_10m,relative_humidity_2m&models=ukmo_seamless&current=temperature_2m,relative_humidity_2m,is_day,precipitation,weather_code&timezone=auto&wind_speed_unit=mph";

      const iconMap = {
        0: "â˜€ï¸",          // Clear sky
        1: "ğŸŒ¤ï¸",         // Mainly clear
        2: "â›…",          // Partly cloudy
        3: "â˜ï¸",          // Overcast
        45: "ğŸŒ«ï¸",         // Fog
        48: "ğŸŒ«ï¸",         // Depositing rime fog
        51: "ğŸŒ¦ï¸",         // Light drizzle
        53: "ğŸŒ¦ï¸",         // Moderate drizzle
        55: "ğŸŒ§ï¸",         // Dense drizzle
        56: "ğŸŒ§ï¸",         // Light freezing drizzle
        57: "ğŸŒ§ï¸",         // Dense freezing drizzle
        61: "ğŸŒ¦ï¸",         // Slight rain
        63: "ğŸŒ§ï¸",         // Moderate rain
        65: "ğŸŒ§ï¸",         // Heavy rain
        66: "ğŸŒ§ï¸â„ï¸",       // Freezing rain
        67: "ğŸŒ§ï¸â„ï¸",       // Heavy freezing rain
        71: "ğŸŒ¨ï¸",         // Snow fall slight
        73: "ğŸŒ¨ï¸",         // Moderate snow
        75: "â„ï¸",          // Heavy snow
        77: "ğŸŒ¨ï¸",         // Snow grains
        80: "ğŸŒ¦ï¸",         // Rain showers slight
        81: "ğŸŒ§ï¸",         // Rain showers moderate
        82: "ğŸŒ§ï¸",         // Rain showers violent
        85: "ğŸŒ¨ï¸",         // Snow showers slight
        86: "â„ï¸",          // Snow showers heavy
        95: "â›ˆï¸",          // Thunderstorm
        96: "â›ˆï¸",          // Thunderstorm with hail
        99: "â›ˆï¸â„ï¸"         // Thunderstorm with heavy hail
      };

      try {
        const response = await fetch(url);
        const data = await response.json();
        const weather = data.current;
        const daily = data.daily;

        const icon = iconMap[weather.weather_code] || "â“";

        const html = `
          <h3>Birmingham Weather</h3>
          <div style="font-size: 48px">${icon}</div>
          <p><strong>Temperature:</strong> ${weather.temperature_2m} Â°C</p>
          <p><strong>Humidity:</strong> ${weather.relative_humidity_2m} %</p>
          <p><strong>Precipitation:</strong> ${weather.precipitation} mm</p>
          <p><strong>Sunrise:</strong> ${daily.sunrise[0].split("T")[1]}</p>
          <p><strong>Sunset:</strong> ${daily.sunset[0].split("T")[1]}</p>
        `;

        document.getElementById("weather").innerHTML = html;
      } catch (error) {
        document.getElementById("weather").innerHTML = "Error loading weather.";
        console.error(error);
      }
    }

    getWeather();
  </script>
</body>
</html>
